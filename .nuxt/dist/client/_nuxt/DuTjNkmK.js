import{q as x,c as p,d as m,o as _,g as v}from"./G2W-Z_K8.js";import{r as d,l as f,c as a,a as r,K as u,L as b,J as F,o as s,t as i}from"./DN39GKtV.js";const k={class:"max-w-3xl mx-auto p-8 bg-gray-900 rounded-lg shadow-lg text-gray-300 min-h-[400px]"},D={key:0,class:"text-center text-gray-400"},w={key:1,class:"text-center text-gray-400"},C={key:2,class:"space-y-4"},$=["onClick"],q={class:"text-xl font-bold text-gray-100"},B={class:"text-sm text-gray-400"},L={class:"text-md font-semibold text-green-300 mt-2"},N={__name:"historial",setup(S){const g=F(),n=d([]),l=d(!0);function h(t){return t!=null&&t.toDate?t.toDate().toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric"}):"Fecha desconocida"}function y(t){g.push(`/verformulario/${t}`)}return f(async()=>{try{const t=x(p(m,"formularios"),_("createdAt","desc")),o=await v(t);n.value=o.docs.map(e=>({id:e.id,...e.data()}))}catch(t){console.error("Error al cargar formularios:",t)}finally{l.value=!1}}),(t,o)=>(s(),a(u,null,[r("button",{onClick:o[0]||(o[0]=e=>t.$router.push("/menu")),class:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded transition m-5"}," Volver a pÃ¡gina principal "),r("main",k,[o[1]||(o[1]=r("h1",{class:"text-3xl font-semibold mb-6 text-gray-200 text-center"},"Historial de Formularios",-1)),l.value?(s(),a("div",D,"Cargando formularios...")):n.value.length===0?(s(),a("div",w," No hay historiales disponibles por ahora. ")):(s(),a("div",C,[(s(!0),a(u,null,b(n.value,e=>{var c;return s(),a("div",{key:e.id,class:"border border-gray-700 bg-gray-800 rounded-lg p-4 hover:shadow-lg transition cursor-pointer",onClick:A=>y(e.id)},[r("h2",q,i(e.name),1),r("p",B,"Fecha: "+i(h(e.createdAt)),1),r("p",L," Total Final: $"+i((c=e.resumenFinanciero)!=null&&c.totalFinal?Math.round(e.resumenFinanciero.totalFinal):0),1)],8,$)}),128))]))])],64))}};export{N as default};
